<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PARK SMART — Signup / Login / Profile / Settings</title>
  <style>
    :root{--bg:#ffffff;--card:#ffffff;--muted:#6b7280;--accent:#8b5cf6;--accent-contrast:#ffffff;}
    [data-theme="dark"]{--bg:#0b1020;--card:#0f1724;--muted:#9ca3af;--accent:#fbbf24;--accent-contrast:#0b0b0b}
    *{box-sizing:border-box}
    body{font-family:Inter,ui-sans-serif,system-ui,Arial,Helvetica,sans-serif;background:var(--bg);margin:0;color:var(--accent-contrast)}
    .container{max-width:980px;margin:36px auto;padding:18px}
    .card{background:var(--card);border-radius:12px;padding:18px;box-shadow:0 6px 20px rgba(16,24,40,0.06)}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
    h1{font-size:20px;margin:0}
    nav .tabs{display:flex;gap:8px}
    .tab{padding:8px 12px;border-radius:8px;cursor:pointer;background:transparent;border:1px solid transparent}
    .tab.active{background:linear-gradient(90deg,var(--accent),#f59e0b);color:white}

    .grid{display:grid;grid-template-columns:1fr 320px;gap:18px}
    .form{padding:12px}
    .field{margin-bottom:12px}
    label{display:block;font-size:13px;margin-bottom:6px;color:var(--muted)}
    input,select,textarea{width:100%;padding:10px;border-radius:8px;border:1px solid #e5e7eb;background:transparent}
    input::placeholder{color:#9ca3af}
    .row{display:flex;gap:8px}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 14px;border-radius:10px;border:0;cursor:pointer}
    .btn.primary{background:var(--accent);color:var(--accent-contrast)}
    .btn.ghost{background:transparent;border:1px solid #e6e6e6}
    .small{font-size:13px;color:var(--muted)}
    .intro{font-size:13px;color:var(--muted);margin-bottom:12px}
    .socials{display:flex;gap:8px;margin-top:8px}
    .socials .btn svg{width:18px;height:18px}
    .sidebar{background:var(--card);padding:12px;border-radius:12px}
    .setting-row{display:flex;align-items:center;justify-content:space-between;padding:8px 0;border-bottom:1px dashed #eef2f7}
    .setting-row:last-child{border-bottom:0}
    .toggle{width:44px;height:26px;border-radius:20px;background:#e5e7eb;position:relative;cursor:pointer}
    .toggle .knob{width:20px;height:20px;border-radius:50%;background:white;position:absolute;top:3px;left:3px;transition:left .18s}
    .toggle.on{background:#60a5fa}
    .toggle.on .knob{left:21px}
    footer{margin-top:12px;font-size:13px;color:var(--muted)}
    .message{padding:8px;border-radius:8px;margin-bottom:10px}
    .hidden{display:none}
    @media(max-width:920px){.grid{grid-template-columns:1fr;}.sidebar{order:2}}
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <header>
        <h1>MotoTaxi — Account</h1>
        <nav>
          <div class="tabs">
            <button class="tab active" data-target="signup">Signup</button>
            <button class="tab" data-target="profile">Profile</button>
            <button class="tab" data-target="login">Login</button>
            <button class="tab" data-target="settings">Settings</button>
          </div>
        </nav>
      </header>

      <div class="grid">
        <section class="form card" id="main-area">
          <!-- Signup -->
          <div id="signup" class="view">
            <p class="intro">Create an account with email & password. After signup you'll be taken to the profile to complete driver details.</p>
            <div id="signup-msg" class="message hidden"></div>
            <form id="signup-form">
              <div class="field">
                <label for="su-email">Email</label>
                <input id="su-email" type="email" placeholder="you@example.com" required />
              </div>
              <div class="field">
                <label for="su-password">Password</label>
                <input id="su-password" type="password" placeholder="Create a password" required minlength="6" />
              </div>
              <div class="field">
                <label for="su-password-confirm">Confirm password</label>
                <input id="su-password-confirm" type="password" placeholder="Repeat password" required minlength="6" />
              </div>
              <div class="row" style="margin-top:8px">
                <button type="submit" class="btn primary">Sign up</button>
                <button type="button" class="btn ghost" id="go-login">Already have an account? Login</button>
              </div>
            </form>

            <div style="margin-top:12px">
              <div class="small">Or sign in with</div>
              <div class="socials">
                <button class="btn ghost" id="signin-email"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"><path d="M3 6.5L12 13 21 6.5" stroke="#111" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>Sign in with Email</button>
                <button class="btn ghost" id="signin-apple"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.365 1.43c-.868.016-1.904.628-2.52.628-.638 0-1.696-.62-2.82-.62-1.46 0-3.136.865-3.968 2.31-1.86 3.245-.474 8.06 1.332 10.69.893 1.33 1.946 2.825 3.33 2.77 1.334-.052 1.832-.86 3.43-.86 1.6 0 2.048.86 3.44.82 1.516-.04 2.47-1.35 3.335-2.69-3.02-1.173-3.008-5.226.002-6.123-1.64-2.37-4.237-2.95-5.23-2.52z" fill="#111"/></svg>Sign in with Apple</button>
              </div>
            </div>

            <hr style="margin:18px 0;border:none;border-top:1px solid #eef2f7" />
            <div class="small">Need to reset a password? Use the Reset Password area below.</div>
            <div style="margin-top:8px">
              <input id="reset-email" placeholder="Enter email to reset password" />
              <div style="margin-top:8px"><button id="reset-btn" class="btn ghost">Reset Password (simulate)</button></div>
              <div id="reset-msg" class="small" style="margin-top:8px;color:var(--muted)"></div>
            </div>
          </div>

          <!-- Profile -->
          <div id="profile" class="view hidden">
            <p class="intro">Complete driver's profile. Fields have placeholders; picture is optional.</p>
            <div id="profile-msg" class="message hidden"></div>
            <form id="profile-form">
              <div class="field">
                <label for="driver-name">Driver's full name</label>
                <input id="driver-name" placeholder="e.g. Jean Claude" />
              </div>
              <div class="field">
                <label for="driver-address">Address</label>
                <input id="driver-address" placeholder="e.g. Kigali, Kicukiro" />
              </div>
              <div class="field">
                <label for="driver-email">Email (auto-filled)</label>
                <input id="driver-email" placeholder="you@example.com" readonly />
              </div>
              <div class="row">
                <div style="flex:1" class="field">
                  <label for="driver-phone">Phone number</label>
                  <input id="driver-phone" placeholder="+250 7xx xxx xxx" />
                </div>
                <div style="width:160px" class="field">
                  <label for="place-number">Place number</label>
                  <input id="place-number" placeholder="Plate no." />
                </div>
              </div>

              <div class="field">
                <label for="vehicle-type">Vehicle type</label>
                <select id="vehicle-type">
                  <option value="">Select vehicle</option>
                  <option>Motorcycle (Moto)</option>
                  <option>Car (Taxi)</option>
                  <option>Delivery bike</option>
                </select>
              </div>

              <div class="field">
                <label>Are you the owner of the vehicle?</label>
                <div class="row">
                  <label><input type="radio" name="owner" value="yes" /> Yes</label>
                  <label><input type="radio" name="owner" value="no" /> No</label>
                </div>
              </div>

              <div class="field">
                <label for="profile-picture">Profile picture (optional)</label>
                <input id="profile-picture" placeholder="Paste image URL or leave blank" />
              </div>

              <div class="row">
                <button type="submit" class="btn primary">Save profile</button>
                <button type="button" class="btn ghost" id="skip-profile">Skip</button>
              </div>
            </form>
          </div>

          <!-- Login -->
          <div id="login" class="view hidden">
            <p class="intro">Sign in with your email and password.</p>
            <div id="login-msg" class="message hidden"></div>
            <form id="login-form">
              <div class="field">
                <label for="li-email">Email</label>
                <input id="li-email" type="email" placeholder="you@example.com" required />
              </div>
              <div class="field">
                <label for="li-password">Password</label>
                <input id="li-password" type="password" placeholder="Your password" required />
              </div>
              <div class="row">
                <button type="submit" class="btn primary">Log in</button>
                <button type="button" class="btn ghost" id="go-signup">Create account</button>
              </div>
            </form>
          </div>

          <!-- Settings -->
          <div id="settings" class="view hidden">
            <p class="intro">Account & app settings. Use Logout to end session.</p>
            <div id="settings-msg" class="message hidden"></div>
            <div class="field">
              <label>Notifications</label>
              <div class="setting-row">
                <div class="small">Enable push notifications</div>
                <div class="toggle" id="toggle-notif"><div class="knob"></div></div>
              </div>
            </div>

            <div class="field">
              <label>Theme</label>
              <div class="setting-row">
                <div class="small">Light / Dark</div>
                <select id="theme-select"><option value="light">Light</option><option value="dark">Dark</option></select>
              </div>
            </div>

            <div class="field">
              <label>Language</label>
              <div class="setting-row">
                <div class="small">Choose language</div>
                <select id="language-select"><option value="en">English</option><option value="fr">Français</option><option value="rw">Kinyarwanda</option></select>
              </div>
            </div>

            <div style="margin-top:12px"><button id="logout-btn" class="btn ghost">Logout</button></div>
          </div>

        </section>

        <aside class="sidebar card">
          <div style="display:flex;align-items:center;gap:12px;margin-bottom:12px">
            <div style="width:54px;height:54px;border-radius:10px;background:#eef2f7"></div>
            <div>
              <div id="side-name" style="font-weight:600">Guest</div>
              <div id="side-email" class="small">Not signed in</div>
            </div>
          </div>

          <div style="margin-top:8px">
            <div style="font-weight:600;margin-bottom:8px">Quick actions</div>
            <div style="display:flex;flex-direction:column;gap:8px">
              <button class="btn ghost" id="quick-profile">Go to Profile</button>
              <button class="btn ghost" id="quick-login">Go to Login</button>
              <button class="btn ghost" id="quick-signup">Go to Signup</button>
            </div>
          </div>

          <footer>
            <div style="margin-top:10px" class="small">Language, theme and notification choices are saved locally (simulated). This is a single-file demo using localStorage.</div>
          </footer>
        </aside>
      </div>
    </div>
  </div>

  <script>
    // Simple single-file SPA behavior + localStorage simulation for users and session
    const tabs = document.querySelectorAll('.tab');
    const views = document.querySelectorAll('.view');
    const sideName = document.getElementById('side-name');
    const sideEmail = document.getElementById('side-email');

    function showView(id){
      views.forEach(v=>v.classList.add('hidden'));
      document.getElementById(id).classList.remove('hidden');
      tabs.forEach(t=>t.classList.toggle('active', t.dataset.target===id));
    }

    tabs.forEach(t=>t.addEventListener('click',()=>showView(t.dataset.target)));

    // localStorage helpers
    function getUsers(){return JSON.parse(localStorage.getItem('mt_users')||'{}');}
    function saveUsers(u){localStorage.setItem('mt_users', JSON.stringify(u));}
    function setCurrent(email){localStorage.setItem('mt_current', email);} 
    function getCurrent(){return localStorage.getItem('mt_current');}
    function clearCurrent(){localStorage.removeItem('mt_current');}

    // update sidebar
    function refreshSidebar(){
      const cur = getCurrent();
      if(!cur){sideName.textContent='Guest';sideEmail.textContent='Not signed in';return}
      const users = getUsers();
      const profile = users[cur] && users[cur].profile ? users[cur].profile : {};
      sideName.textContent = profile.name || cur.split('@')[0] || 'Driver';
      sideEmail.textContent = cur;
    }

    // Signup flow
    document.getElementById('signup-form').addEventListener('submit', e=>{
      e.preventDefault();
      const email = document.getElementById('su-email').value.trim().toLowerCase();
      const p = document.getElementById('su-password').value;
      const pc = document.getElementById('su-password-confirm').value;
      const msg = document.getElementById('signup-msg');
      msg.classList.add('hidden');
      if(!email || !p){ msg.textContent='Provide email and password.'; msg.classList.remove('hidden'); return }
      if(p !== pc){ msg.textContent='Passwords do not match.'; msg.classList.remove('hidden'); return }
      const users = getUsers();
      if(users[email]){ msg.textContent='An account with this email already exists. Please login.'; msg.classList.remove('hidden'); return }
      users[email] = {auth:{password:p}, profile:null};
      saveUsers(users);
      setCurrent(email);
      refreshSidebar();
      // navigate to profile auto-fill
      document.getElementById('driver-email').value = email;
      showView('profile');
    });

    // Simulated social sign in buttons
    document.getElementById('signin-email').addEventListener('click', ()=> showView('login'));
    document.getElementById('signin-apple').addEventListener('click', ()=>{
      // simulation: create a user with apple id (demo)
      const email = 'apple.user@mototaxi.local';
      const users = getUsers();
      if(!users[email]){ users[email] = {auth:{password:'apple-oauth'}, profile:null}; saveUsers(users);} 
      setCurrent(email); refreshSidebar(); document.getElementById('driver-email').value = email; showView('profile');
    });

    // Reset password (simulate): set a new temporary password
    document.getElementById('reset-btn').addEventListener('click', ()=>{
      const em = document.getElementById('reset-email').value.trim().toLowerCase();
      const resetMsg = document.getElementById('reset-msg'); resetMsg.textContent='';
      if(!em){ resetMsg.textContent='Type an email first.'; return }
      const users = getUsers();
      if(!users[em]){ resetMsg.textContent='No account found for that email.'; return }
      users[em].auth.password = 'new-temp-123'; saveUsers(users);
      resetMsg.textContent = 'Password reset simulated. Temporary password: new-temp-123 (change it after login).';
    });

    // Profile save
    document.getElementById('profile-form').addEventListener('submit', e=>{
      e.preventDefault();
      const cur = getCurrent(); if(!cur){alert('No current user. Please signup or login.'); showView('signup'); return}
      const users = getUsers();
      users[cur].profile = {
        name: document.getElementById('driver-name').value.trim(),
        address: document.getElementById('driver-address').value.trim(),
        email: cur,
        phone: document.getElementById('driver-phone').value.trim(),
        plate: document.getElementById('place-number').value.trim(),
        vehicle: document.getElementById('vehicle-type').value,
        owner: document.querySelector('input[name="owner"]:checked') ? document.querySelector('input[name="owner"]:checked').value : null,
        picture: document.getElementById('profile-picture').value.trim()
      };
      saveUsers(users);
      document.getElementById('profile-msg').textContent = 'Profile saved.'; document.getElementById('profile-msg').classList.remove('hidden');
      refreshSidebar();
      // after saving profile we can go to settings or show confirmation; we'll go to settings to continue
      setTimeout(()=> showView('settings'), 800);
    });
    document.getElementById('skip-profile').addEventListener('click', ()=> showView('settings'));

    // Login flow
    document.getElementById('login-form').addEventListener('submit', e=>{
      e.preventDefault();
      const email = document.getElementById('li-email').value.trim().toLowerCase();
      const pass = document.getElementById('li-password').value;
      const users = getUsers();
      const msg = document.getElementById('login-msg'); msg.classList.add('hidden');
      if(!users[email] || users[email].auth.password !== pass){ msg.textContent='Invalid credentials.'; msg.classList.remove('hidden'); return }
      setCurrent(email); refreshSidebar();
      // if profile exists go to settings (dashboard simulation) otherwise go to profile
      if(users[email].profile) showView('settings'); else { document.getElementById('driver-email').value = email; showView('profile'); }
    });

    // Quick nav
    document.getElementById('go-login').addEventListener('click', ()=> showView('login'));
    document.getElementById('go-signup').addEventListener('click', ()=> showView('signup'));
    document.getElementById('quick-profile').addEventListener('click', ()=> showView('profile'));
    document.getElementById('quick-login').addEventListener('click', ()=> showView('login'));
    document.getElementById('quick-signup').addEventListener('click', ()=> showView('signup'));

    // Settings: notifications toggle
    const tog = document.getElementById('toggle-notif');
    tog.addEventListener('click', ()=>{
      tog.classList.toggle('on');
      localStorage.setItem('mt_notif', tog.classList.contains('on') ? '1' : '0');
    });
    // Theme select
    const themeSelect = document.getElementById('theme-select');
    themeSelect.addEventListener('change', ()=>{
      document.documentElement.setAttribute('data-theme', themeSelect.value==='dark' ? 'dark' : 'light');
      localStorage.setItem('mt_theme', themeSelect.value);
    });

    // Language select (simulated save)
    document.getElementById('language-select').addEventListener('change', e=>{
      localStorage.setItem('mt_lang', e.target.value);
      document.getElementById('settings-msg').textContent = 'Language saved (simulated).'; document.getElementById('settings-msg').classList.remove('hidden');
      setTimeout(()=> document.getElementById('settings-msg').classList.add('hidden'),1200);
    });

    // Logout
    document.getElementById('logout-btn').addEventListener('click', ()=>{
      clearCurrent(); refreshSidebar(); showView('login');
      document.getElementById('settings-msg').textContent = 'You have been logged out.'; document.getElementById('settings-msg').classList.remove('hidden');
      setTimeout(()=> document.getElementById('settings-msg').classList.add('hidden'),1200);
    });

    // initial load: restore theme, notif, lang
    window.addEventListener('load', ()=>{
      const t = localStorage.getItem('mt_theme')||'light';
      themeSelect.value = t; document.documentElement.setAttribute('data-theme', t==='dark' ? 'dark' : 'light');
      const n = localStorage.getItem('mt_notif'); if(n==='1') tog.classList.add('on');
      const lang = localStorage.getItem('mt_lang')||'en'; document.getElementById('language-select').value = lang;
      // restore current user
      const cur = getCurrent(); if(cur){ document.getElementById('driver-email').value = cur; }
      refreshSidebar();
    });

  </script>
</body>
</html>

